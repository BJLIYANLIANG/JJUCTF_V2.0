{% include'user/header.html' %}
<style>
    .awd-group-card{
        border: 0.3rem solid #2c3e50;
        background-color: #0d1927;
        color: white;
        font-size: .9rem;
    }
    .modal-header{
        border-bottom: none;
    }
    .awd-group-card-x{
        min-height: 10rem;
        max-height: 10rem;
        overflow: auto;
    }
    .awd-card{
        border: 0.3rem solid #005cbf;
        background-color: #0d1927;
        color: white;
        margin: 1rem;
        width: 30rem;
    }
    .card-body-awd{
        padding: .3rem;
        padding-bottom: .7rem;
    }
    .card-competition-notice{
        border: 0.3rem solid #2c3e50;
        background-color: #0d1927;
        color: white;

    }
    .card-competition-notice-x{
        overflow-y:auto;
        min-height: 10rem;
        max-height: 10rem;
        width: 100%
    }

    .table td{
        padding: .2rem;
    }
    .awd-rank{
        border: .2rem solid #31708f;
        min-height: 28rem;
        max-height: 28rem;
    }
    /*修改模态框出现的位置*/
    .modal_location{
        top: 35%;
    }
    .awd-modal-content{
        background-color: rgba(45,45,45,0.87);
        border: .2rem solid #005cbf;
        color: white;
    }
    .btn{
        font-size: .9rem;
    }
</style>
<div  class="container-fluid" >
    <br>
       <div class="row">
        <div class="col-md-3">
            <div class="card awd-group-card">
                <div class="card-header text-info">队伍信息</div>
{#                 # select group_id,name,info,user_id from user_group where group_id=#}
                <div class="card-body">
                    <div class="row awd-group-card-x">
                        <div class="col-md-12">用户名: <span class="text-info">{{ username }}</span></div>
                        <div class="col-md-12">战队名: <span class="text-info">{{ groupInfo[1] }}</span></div>
                        <div class="col-md-12">战队排名：<span class="text-info">1154</span></div>
                        <div class="col-md-12">提交数量：<span class="text-info">10</span></div>
                        <div class="col-md-12">积分：<span class="text-info">5000</span></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6" >
              <div class="card card-competition-notice">
                  <div class="card-header text-info">比赛公告</div>
                  <div class="card-body">
                      <div class="row">
                         <div class="col-md-12">
                             <div class="card-competition-notice-x">
                                 <ol>{#公告栏#}
                                     {% for i in userNotice %}
                                        <li>{{ i[1] }}</li>
                                     {% endfor %}
                                 </ol>
                             </div>
                         </div>
                      </div>
                  </div>
              </div>
        </div>
        <div class="col-md-3">
            <div class="row">
                <div class="col-md-12">
                    <div class="card awd-group-card">
                <div class="card-header text-info">解题动态</div>
                <div class="card-body">
                    <div class="awd-group-card-x">
                        <table class="table table-borderless" id="challenge_list" style="color: white;font-size: 0.65rem">
                            <tbody>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>
                            <tr>
                                <td style="width: 80%">admin战队 <span class="text-danger">攻击了 </span><span>jjusec战队 </span>的 <span></span><span class="text-info">WEB1</span></td>
                                <td style="width: 20%">18:01:36</td>
                            </tr>

                    </tbody>
                    </table>
                    </div>

                </div>
            </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-3">
            <div style="border: .2rem solid #31708f">
                <h3 class="title text-center" style="color: #4ec3ff">靶场列表</h3>
                <div style="overflow-y:auto;max-height: 28rem;min-height: 27rem">
                    <table class="table table-bordered text-center">
                    <thead>
                    <tr>
                        <th style="border-color: #1c2b36;color: #87CEFA">队伍</th>
                        <th style="border-color: #1c2b36;color: #87CEFA">题目</th>
                        <th style="border-color: #1c2b36;color: #87CEFA">ip地址</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for target in awd_target_list %}
                    <tr>
                        <td style="border-color: #1c2b36;color: #87CEFA">{{ target[0] }}</td>
                        <td style="border-color: #1c2b36;color: #87CEFA">{{ target[1] }}</td>
                        <td style="border-color: #1c2b36;color: #87CEFA">{{ target[2] }}</td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-6 col-sm-12">
            <div class="row">
                {% for i in awd_list %}
{#                    name,ssh_port,other_port,time,ip,status,ssh_user,password from awd_exam_instance#}
                <div class="card awd-card col-md-3">
                    <div class="card-header" style="position: relative">
                        <div class="" style="float: left"><b>{{ i[0] }}</b></div>
{#                        <div class="text-success" style="float: right;font-size: 20px">300</div>#}
                    </div>
                    <div class="card-body card-body-awd">
                        <div class="row">
                            <div class="col-md-12">题目: <b>{{ i[0] }}</b></div>
                            <div class="col-md-12">状态: {% if i[5]==1 %}<span class="text-success">正常</span>{% else %}<span class="text-warning">异常</span>{% endif %}</div>
                        </div>
                        <br>
                        <div class="row text-center">
                            <div class="col-md-4" style="padding: .1rem"><a class="text-info"  data-toggle="modal" data-target="#more{{ i[0] }}">更多</a></div>
                            <div class="col-md-4" style="padding: .1rem"><a class="text-primary" data-toggle="modal" data-target="#post_flag_1">提交</a></div>
                            <div class="col-md-4" style="padding: .1rem"><a class="text-danger"  data-toggle="modal" data-target="#reset_1">重置</a></div>
                        </div>
                    </div>

                         <!-- 模态框（Modal） -->
                    <div class="modal fade modal_location" id="more{{ i[0] }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content awd-modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title text-primary ">更多信息</h4>
                                    <button type="button" class="close text-light" data-dismiss="modal" aria-hidden="true">×</button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-12">
    {#                                        name,ssh_port,other_port,time,ip,status,ssh_user,password#}
                                            题目：<span class="text-info">{{ i[0] }}</span>
                                        </div>
                                        <div class="col-md-12">
                                            IP：<span class="text-info">{{ i[4] }}</span>
                                        </div>
                                        <div class="col-md-12">
                                            端口：<span class="text-info">{{ i[2] }}</span>
                                        </div>
                                        <div class="col-md-12">
                                            SSH 端口：<span class="text-info">{{ i[1] }}</span>
                                        </div>
                                        <div class="col-md-12">
                                            登陆用户：<span class="text-info">{{ i[6] }}</span>
                                        </div>
                                        <div class="col-md-12">
                                            登陆密码：<span class="text-info">{{ i[7] }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->

                    <div class="modal fade modal_location" id="post_flag_1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content awd-modal-content">
                                <div class="modal-header">
                                     <h4 class="modal-title text-success">提交FLAG</h4>
                                    <button type="button" class="close text-light" data-dismiss="modal"
                                            aria-hidden="true">×
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">

                                        <div class="col-md-12 text-center">
                                            <div class="form-group">
                                              <label for="flag">FLAG</label>
                                              <input type="text" class="form-control" id="flag">
                                            </div>
                                            <button class="btn btn-primary">提交</button>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->


                                    <div class="modal fade modal_location" id="reset_1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content awd-modal-content">
                                <div class="modal-header">
                                     <h4 class="modal-title text-warning">重置靶场</h4>
                                    <button type="button" class="close text-light" data-dismiss="modal"
                                            aria-hidden="true">×
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">

                                        <div class="col-md-12 text-center">
                                            <p>重置靶场后，将扣除您50积分</p>
                                            <button class="btn btn-danger">重置</button>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->

                </div>
                {% endfor %}

            </div>
        </div>
        <div class="col-md-3">
            <div class="row">
                <div class="col-md-12">
                    <div class="ctf_time time btn-group text-right ">
                        <button class="btn btn-lg text-info">
                            <span>距离比赛结束:</span>
                            <span id="t_d">00天</span>
                            <span id="t_h">00时</span>
                            <span id="t_m">00分</span>
                            <span id="t_s">00秒</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="awd-rank">

                <h3 class="title text-center" style="color: #4ec3ff">比赛排名</h3>
                <div style="overflow-y:auto;max-height: 24rem">
                    <table class="table table-bordered text-center">
{#                <caption>比赛排名</caption>#}
                    <thead>
                    <tr>
                        <th style="border-color: #1c2b36;color: #87CEFA">排名</th>
                        <th style="border-color: #1c2b36;color: #87CEFA">队名</th>
                        <th style="border-color: #1c2b36;color: #87CEFA">积分</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% set n = 0 %}
                 {% for i in awd_rank_list %}
                    <tr>
                        <td style="border-color: #1c2b36;color: #87CEFA">{{ loop.index  }} </td>
                        <td style="border-color: #1c2b36;color: #87CEFA">{{ i[1] }}</td>
                        <td style="border-color: #1c2b36;color: #87CEFA">{{ i[2] }}</td>
                    </tr>

                    {% endfor %}
               </tbody>
            </table>
                </div>
             </div>
        </div>
    </div>


    <p></p>
</div>
    <script>
        setInterval(function() {
            const EndTime = new Date('{{ end_time }}');
            const NowTime = new Date();
            const t = EndTime.getTime() - NowTime.getTime();
            let d = 0;
            let h = 0;
            let m = 0;
            let s = 0;
            if (t >= 0) {
                d = Math.floor(t / 1000 / 60 / 60 / 24);
                h = Math.floor(t / 1000 / 60 / 60 % 24);
                m = Math.floor(t / 1000 / 60 % 60);
                s = Math.floor(t / 1000 % 60);
            }
            document.getElementById("t_d").innerHTML = d + "天";
            document.getElementById("t_h").innerHTML = h + "时";
            document.getElementById("t_m").innerHTML = m + "分";
            document.getElementById("t_s").innerHTML = s + "秒";
        }, 10);
    </script>
{% include'user/footer.html' %}